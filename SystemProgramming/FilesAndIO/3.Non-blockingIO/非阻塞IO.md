# 非阻塞IO

[TOC]

## 非阻塞IO解决的问题（重点）

### 背景

非阻塞IO（Non-blocking I/O）主要用于解决传统阻塞I/O模型中的性能问题，尤其在高并发的网络应用中具有显著优势。它的出现旨在解决以下几类问题：

1. **避免I/O操作的阻塞**：
   在传统阻塞I/O模型中，当程序进行读写操作时，若数据未准备好或资源不可用，程序会进入等待状态，无法继续执行其他操作，导致程序效率低下。非阻塞I/O允许在资源不可用时立即返回控制给程序，程序可以继续执行其他任务，而不是一直等待I/O操作完成。

2. **提高并发性和响应性**：
   在阻塞I/O中，每个连接或I/O操作都会占用一个线程或进程资源，当连接数过多时，系统的线程或进程管理开销变大，性能会下降。非阻塞I/O则通过避免阻塞来允许单个线程处理多个连接或操作，显著提高了系统的并发处理能力，并且响应时间也大大减少。

3. **减少线程/进程切换开销**：
   使用阻塞I/O模型时，通常每个I/O操作需要一个线程或进程来处理，系统会频繁地进行线程或进程的上下文切换，增加了CPU的开销。非阻塞I/O允许单个线程管理多个I/O操作，减少了线程/进程切换的频率，降低了系统资源的消耗。

4. **处理长时间等待的I/O操作**：
   在一些长时间的I/O操作（如网络请求、文件读写）中，阻塞I/O会使整个程序卡住，而非阻塞I/O可以让程序在等待I/O完成的同时继续处理其他任务，避免不必要的时间浪费，提升整体性能。

5. **简化对异步操作的支持**：
   非阻塞I/O与事件驱动模型（如epoll、select、poll）结合，简化了对异步操作的支持。这种方式通过注册事件来等待数据可用，避免了线程的复杂管理，同时实现了高效的异步I/O处理。

### 典型应用场景：
- **高并发服务器**：例如聊天服务器、Web服务器等，非阻塞I/O让服务器能够在处理大量并发连接时保持高效。
- **实时通信系统**：非阻塞I/O保证了通信的及时性，减少了响应延迟。
- **游戏服务器**：需要快速处理大量并发请求，同时保持较低的系统开销和高效的性能。

